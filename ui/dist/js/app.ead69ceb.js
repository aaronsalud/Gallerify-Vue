(function(t){function e(e){for(var s,o,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)o=i[d],a[o]&&f.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],s=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=r[0]))}return t}var s={},a={app:0},n=[];function o(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=s,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(r,s,function(e){return t[e]}.bind(null,s));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var s=r("1356"),a=r.n(s);a.a},1356:function(t,e,r){},"2d2f":function(t,e,r){},4678:function(t,e,r){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb718","./de-ch.js":"bb718","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=n(t);return r(e)}function n(t){var e=s[t];if(!(e+1)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return e}a.keys=function(){return Object.keys(s)},a.resolve=n,t.exports=a,a.id="4678"},"56d7":function(t,e,r){"use strict";r.r(e);r("744f"),r("6c7b"),r("7514"),r("20d6"),r("1c4c"),r("6762"),r("cadf"),r("e804"),r("55dd"),r("d04f"),r("c8ce"),r("217b"),r("7f7f"),r("f400"),r("7f25"),r("536b"),r("d9ab"),r("f9ab"),r("32d7"),r("25c9"),r("9f3c"),r("042e"),r("c7c6"),r("f4ff"),r("049f"),r("7872"),r("a69f"),r("0b21"),r("6c1a"),r("c7c62"),r("84b4"),r("c5f6"),r("2e37"),r("fca0"),r("7cdf"),r("ee1d"),r("b1b1"),r("87f3"),r("9278"),r("5df2"),r("04ff"),r("f751"),r("4504"),r("fee7"),r("ffc1"),r("0d6d"),r("9986"),r("8e6e"),r("25db"),r("e4f7"),r("b9a1"),r("64d5"),r("9aea"),r("db97"),r("66c8"),r("57f0"),r("165b"),r("456d"),r("cf6a"),r("fd24"),r("8615"),r("551c"),r("097d"),r("df1b"),r("2397"),r("88ca"),r("ba16"),r("d185"),r("ebde"),r("2d34"),r("f6b3"),r("2251"),r("c698"),r("a19f"),r("9253"),r("9275"),r("3b2b"),r("3846"),r("4917"),r("a481"),r("28a5"),r("386d"),r("6b54"),r("4f7f"),r("8a81"),r("ac4da"),r("8449"),r("9c86"),r("fa83"),r("48c0"),r("a032"),r("aef6"),r("d263"),r("6c37"),r("9ec8"),r("5695"),r("2fdb"),r("d0b0"),r("5df3"),r("b54a"),r("f576"),r("ed50"),r("788d"),r("14b9"),r("f386"),r("f559"),r("1448"),r("673e"),r("242a"),r("c66f"),r("b05c"),r("34ef"),r("6aa2"),r("15ac"),r("af56"),r("b6e4"),r("9c29"),r("63d9"),r("4dda"),r("10ad"),r("c02b"),r("4795"),r("130f"),r("ac6a"),r("96cf");var s=r("2b0e"),a=r("bb71");r("da64");s["a"].use(a["a"],{iconfont:"md",theme:{primary:"#1E88E5",secondary:"#64B5F6",accent:"#29B6F6",error:"#F4511E",warning:"#FF8F00",info:"#455A64",success:"#689F38"}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("v-app",{staticStyle:{background:"#E3E3EE"}},[r("v-navigation-drawer",{attrs:{app:"",temporary:"",fixed:""},model:{value:t.sideNavVisible,callback:function(e){t.sideNavVisible=e},expression:"sideNavVisible"}},[r("v-toolbar",{attrs:{color:"accent",dark:"",flat:""}},[r("v-toolbar-side-icon",{on:{click:t.toggleSideNav}}),r("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[r("h1",{staticClass:"title pl-3"},[t._v("Gallerify")])])],1),r("v-divider"),r("v-list",[t._l(t.sideNavItems,function(e){return r("v-list-tile",{key:e.title,attrs:{ripple:"",to:e.link}},[r("v-list-tile-action",[r("v-icon",[t._v(t._s(e.icon))])],1),r("v-list-tile-content",[t._v("\n            "+t._s(e.title)+"\n          ")])],1)}),t.user?r("v-list-tile",{attrs:{ripple:""},on:{click:t.signoutUser}},[r("v-list-tile-action",[r("v-icon",[t._v("exit_to_app")])],1),r("v-list-tile-content",[t._v("Sign Out")])],1):t._e()],2)],1),r("v-toolbar",{attrs:{fixed:"",color:"primary",dark:""}},[r("v-toolbar-side-icon",{on:{click:t.toggleSideNav}}),r("v-toolbar-title",{staticClass:"hidden-xs-only"},[r("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[t._v("Gallerify")])],1),r("v-spacer"),r("v-text-field",{attrs:{clearable:"",flex:"","prepend-icon":"search",placeholder:"Search for posts",color:"accent","single-line":"","hide-details":""},on:{input:function(e){return t.debounceInput(t.handleSearchPosts)}},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),t.searchResults.length?r("v-card",{attrs:{light:"",id:"card__search"}},[r("v-list",t._l(t.searchResults,function(e){return r("v-list-tile",{key:e._id,on:{click:function(r){return t.goToSearchResult(e._id)}}},[r("v-list-tile-title",[t._v("\n              "+t._s(e.title)+" -\n              "),r("span",{staticClass:"font-weight-thin"},[t._v(t._s(t.formatDescription(e.description)))])]),t.checkIfUserFavourite(e._id)?r("v-list-tile-action",[r("v-icon",{attrs:{color:"red"}},[t._v("favorite")])],1):t._e()],1)}),1)],1):t._e(),r("v-spacer"),r("v-toolbar-items",{staticClass:"hidden-xs-only"},[t._l(t.horizontalNavItems,function(e){return r("v-btn",{key:e.title,attrs:{flat:"",to:e.link}},[r("v-icon",{staticClass:"hidden-sm-only",attrs:{left:""}},[t._v(t._s(e.icon))]),t._v("\n          "+t._s(e.title)+"\n        ")],1)}),t.user?r("v-btn",{attrs:{flat:"",to:"/profile"}},[r("v-icon",{staticClass:"hidden-sm-only",attrs:{left:""}},[t._v("account_box")]),r("v-badge",{class:{bounce:t.badgeAnimated},attrs:{right:"",color:"red darken-2"}},[t.userFavourites.length?r("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.userFavourites.length))]):t._e(),t._v("\n            Profile\n          ")])],1):t._e(),t.user?r("v-btn",{attrs:{flat:""},on:{click:t.signoutUser}},[r("v-icon",{staticClass:"hidden-sm-only",attrs:{left:""}},[t._v("exit_to_app")]),r("v-badge",{attrs:{right:"",color:"blue darken-2"}},[t._v("\n            Sign Out\n          ")])],1):t._e()],2)],1),r("main",[r("v-container",{staticClass:"mt-4"},[r("transition",{attrs:{name:"fade"}},[r("router-view")],1),r("v-snackbar",{attrs:{color:"success",timeout:2e3,top:"",right:""},model:{value:t.authSnackbar,callback:function(e){t.authSnackbar=e},expression:"authSnackbar"}},[r("v-icon",{staticClass:"mr-3"},[t._v("\n            check_circle\n          ")]),r("h3",[t._v("You are now signed in!")]),r("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.authSnackbar=!1}}},[t._v("Close")])],1),t.authError?r("v-snackbar",{attrs:{color:"warning",timeout:2e3,top:"",right:""},model:{value:t.authErrorSnackbar,callback:function(e){t.authErrorSnackbar=e},expression:"authErrorSnackbar"}},[r("v-icon",{staticClass:"mr-3"},[t._v("\n            cancel\n          ")]),r("h3",[t._v(t._s(t.authError.message))]),r("v-btn",{attrs:{dark:"",to:"/signin"}},[t._v("Sign in")])],1):t._e()],1)],1)],1)],1)},o=[],i=r("2f62"),l=r("5118");function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){u(t,e,r[e])})}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={name:"App",data:function(){return{searchTerm:"",sideNavVisible:!1,authSnackbar:!1,authErrorSnackbar:!1,badgeAnimated:!1,timeoutRef:null}},watch:{user:function(t,e){null===e&&(this.authSnackbar=!0)},authError:function(t){null!==t&&(this.authErrorSnackbar=!0)},userFavourites:function(t){var e=this;this.badgeAnimated=!0,Object(l["setTimeout"])(function(){return e.badgeAnimated=!1},1e3)}},computed:c({},Object(i["b"])(["authError","user","userFavourites","searchResults"]),{horizontalNavItems:function(){var t=[{icon:"chat",title:"Posts",link:"/posts"},{icon:"lock_open",title:"Sign In",link:"/signin"},{icon:"create",title:"Sign Up",link:"signup"}];return this.user&&(t=[{icon:"chat",title:"Posts",link:"/posts"}]),t},sideNavItems:function(){var t=[{icon:"chat",title:"Posts",link:"/posts"},{icon:"lock_open",title:"Sign In",link:"/signin"},{icon:"create",title:"Sign Up",link:"signup"}];return this.user&&(t=[{icon:"chat",title:"Posts",link:"/posts"},{icon:"stars",title:"Create a Post",link:"/post/add"},{icon:"account_box",title:"Profile",link:"/profile"}]),t}}),methods:{formatDescription:function(t){return t.length>30?"".concat(t.slice(0,30),"..."):t},checkIfUserFavourite:function(t){return this.userFavourites&&this.userFavourites.some(function(e){return e._id===t})},goToSearchResult:function(t){this.searchTerm="",this.$router.push("/posts/".concat(t)),this.$store.commit("clearSearchResults")},handleSearchPosts:function(){this.$store.dispatch("searchPosts",{searchTerm:this.searchTerm})},toggleSideNav:function(){this.sideNavVisible=!this.sideNavVisible},signoutUser:function(){this.$store.dispatch("signoutUser")},debounceInput:function(t){var e=this;this.timeoutRef||(this.timeoutRef=Object(l["setTimeout"])(function(){t(),e.timeoutRef=null},1e3))}}},f=d,v=(r("034f"),r("2877")),m=r("6544"),p=r.n(m),g=r("7496"),h=r("4ca6"),b=r("8336"),y=r("b0af"),_=r("a523"),j=r("ce7e"),x=r("132d"),w=r("8860"),P=r("ba95"),k=r("40fe"),V=r("5d23"),O=r("f774"),U=r("2db4"),S=r("9910"),I=r("2677"),C=r("71d9"),$=r("2a7f"),T=r("706c"),F=Object(v["a"])(f,n,o,!1,null,null,null),D=F.exports;p()(F,{VApp:g["a"],VBadge:h["a"],VBtn:b["a"],VCard:y["a"],VContainer:_["a"],VDivider:j["a"],VIcon:x["a"],VList:w["a"],VListTile:P["a"],VListTileAction:k["a"],VListTileContent:V["a"],VListTileTitle:V["c"],VNavigationDrawer:O["a"],VSnackbar:U["a"],VSpacer:S["a"],VTextField:I["a"],VToolbar:C["a"],VToolbarItems:$["a"],VToolbarSideIcon:T["a"],VToolbarTitle:$["b"]});var E=r("8c4f"),q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"text-xs-center":"","mt-3":""}},[r("v-layout",{attrs:{row:""}},[r("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[r("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:"secondary"}})],1)],1)],1)],1),r("v-flex",{attrs:{xs12:""}},[!t.loading&&t.posts.length>0?r("v-carousel",t._b({attrs:{interval:"3000"}},"v-carousel",{cycle:!0},!1),t._l(t.posts,function(e){return r("v-carousel-item",{key:e._id,attrs:{src:e.imageUrl},nativeOn:{click:function(r){return t.goToPost(e._id)}}},[r("h1",{attrs:{id:"carousel__title"}},[t._v(t._s(e.title))])])}),1):t._e()],1),t.loading?t._e():r("v-layout",{staticClass:"mt-3 mb-3",attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{staticClass:"secondary",attrs:{to:"/posts",large:"",dark:""}},[t._v("\n        Explore Posts\n      ")])],1)],1)],1)},L=[];function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){A(t,e,r[e])})}return t}function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var z={name:"home",methods:{handleGetCarouselPosts:function(){this.$store.dispatch("getPosts")},goToPost:function(t){this.$router.push("/posts/".concat(t))}},computed:R({},Object(i["b"])(["loading","posts"])),created:function(){this.handleGetCarouselPosts()}},B=z,M=(r("8b71"),r("5e66")),N=r("3e35"),Q=r("169a"),G=r("0e8f"),Y=r("a722"),J=r("490a"),W=Object(v["a"])(B,q,L,!1,null,null,null),H=W.exports;p()(W,{VBtn:b["a"],VCarousel:M["a"],VCarouselItem:N["a"],VContainer:_["a"],VDialog:Q["a"],VFlex:G["a"],VLayout:Y["a"],VProgressCircular:J["a"]});var K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t.infiniteScrollPosts?r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.infiniteScrollPosts.posts,function(e){return r("v-flex",{key:e._id,attrs:{xs12:"",sm6:""}},[r("v-card",{attrs:{hover:""}},[r("v-img",{attrs:{src:e.imageUrl,height:"30vh",lazy:""},nativeOn:{click:function(r){return t.goToPost(e._id)}}}),r("v-card-actions",[r("v-card-title",{attrs:{primary:""}},[r("dir",[r("div",{staticClass:"headline"},[t._v(t._s(e.title))]),r("span",{staticClass:"grey--text"},[t._v(t._s(e.likes)+" likes - "+t._s(e.messages.length)+" comments")])])],1),r("v-spacer"),r("v-btn",{attrs:{icon:""}},[r("v-icon",{on:{click:function(e){t.showPostCreator=!t.showPostCreator}}},[t._v(t._s("keyboard_arrow_"+(t.showPostCreator?"up":"down")))])],1)],1),r("v-slide-y-transition",[r("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.showPostCreator,expression:"showPostCreator"}],staticClass:"grey lighten-4"},[r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-avatar",[r("img",{attrs:{src:e.createdBy.avatar,alt:""}})]),r("v-list-tile-content",[r("v-list-tile-title",{staticClass:"text--primary"},[t._v(t._s(e.createdBy.username))]),r("v-list-tile-sub-title",{staticClass:"font-weight-thin"},[t._v("Added "+t._s(t.formatDate(e.createdDate)))])],1),r("v-list-tile-action",[r("v-btn",{attrs:{icon:"",ripple:""}},[r("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("info")])],1)],1)],1)],1)],1)],1)],1)}),1):t._e(),t.showMoreEnabled?r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{"justify-center":"",row:""}},[r("v-btn",{attrs:{color:"info"},on:{click:t.showMorePosts}},[t._v("Fetch More")])],1)],1)],1):t._e()],1)},X=[],Z=r("23ee");function tt(){var t=mt(["\n  mutation($postId: ID!) {\n    deleteUserPost(postId: $postId) {\n      _id\n    }\n  }\n"]);return tt=function(){return t},t}function et(){var t=mt(["\n  mutation(\n    $postId: ID!\n    $userId: ID!\n    $title: String!\n    $imageUrl: String!\n    $categories: [String]!\n    $description: String!\n  ) {\n    updateUserPost(\n      postId: $postId\n      userId: $userId\n      title: $title\n      imageUrl: $imageUrl\n      categories: $categories\n      description: $description\n    ) {\n      _id\n      title\n      imageUrl\n      description\n      categories\n      createdDate\n      likes\n      createdBy {\n        _id\n        avatar\n      }\n    }\n  }\n"]);return et=function(){return t},t}function rt(){var t=mt(["\n  mutation($postId: ID!, $username: String!) {\n    unlikePost(postId: $postId, username: $username) {\n      likes\n      favourites {\n        _id\n        title\n        imageUrl\n      }\n    }\n  }\n"]);return rt=function(){return t},t}function st(){var t=mt(["\n  mutation($postId: ID!, $username: String!) {\n    likePost(postId: $postId, username: $username) {\n      likes\n      favourites {\n        _id\n        title\n        imageUrl\n      }\n    }\n  }\n"]);return st=function(){return t},t}function at(){var t=mt(["\n  mutation(\n    $title: String!\n    $imageUrl: String!\n    $categories: [String]!\n    $description: String!\n    $creatorId: ID!\n  ) {\n    addPost(\n      title: $title\n      imageUrl: $imageUrl\n      categories: $categories\n      description: $description\n      creatorId: $creatorId\n    ) {\n      _id\n      title\n      imageUrl\n      categories\n      description\n    }\n  }\n"]);return at=function(){return t},t}function nt(){var t=mt(["\n  mutation($messageBody: String!, $userId: ID!, $postId: ID!) {\n    addPostMessage(\n      messageBody: $messageBody\n      userId: $userId\n      postId: $postId\n    ) {\n      _id\n      messageBody\n      messageDate\n      messageUser {\n        _id\n        username\n        avatar\n      }\n    }\n  }\n"]);return nt=function(){return t},t}function ot(){var t=mt(["\n  mutation($username: String!, $email: String!, $password: String!) {\n    signupUser(username: $username, email: $email, password: $password) {\n      token\n    }\n  }\n"]);return ot=function(){return t},t}function it(){var t=mt(["\n  mutation($username: String!, $password: String!) {\n    signinUser(username: $username, password: $password) {\n      token\n    }\n  }\n"]);return it=function(){return t},t}function lt(){var t=mt(["\n  query($userId: ID!) {\n    getUserPosts(userId: $userId) {\n      _id\n      title\n      description\n      imageUrl\n      likes\n      categories\n      createdDate\n    }\n  }\n"]);return lt=function(){return t},t}function ct(){var t=mt(["\n  query {\n    getCurrentUser {\n      _id\n      username\n      email\n      avatar\n      joinDate\n      favourites {\n        _id\n        title\n        imageUrl\n      }\n    }\n  }\n"]);return ct=function(){return t},t}function ut(){var t=mt(["\n  query($searchTerm: String) {\n    searchPosts(searchTerm: $searchTerm) {\n      _id\n      title\n      description\n      imageUrl\n      likes\n    }\n  }\n"]);return ut=function(){return t},t}function dt(){var t=mt(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      _id\n      title\n      imageUrl\n      categories\n      description\n      likes\n      createdDate\n      messages {\n        _id\n        messageBody\n        messageDate\n        messageUser {\n          _id\n          username\n          avatar\n        }\n      }\n    }\n  }\n"]);return dt=function(){return t},t}function ft(){var t=mt(["\n  query($pageNum: Int!, $pageSize: Int!) {\n    infiniteScrollPosts(pageNum: $pageNum, pageSize: $pageSize) {\n      hasMore\n      posts {\n        _id\n        title\n        imageUrl\n        categories\n        description\n        likes\n        createdDate\n        messages {\n          _id\n        }\n        createdBy {\n          _id\n          username\n          avatar\n        }\n      }\n    }\n  }\n"]);return ft=function(){return t},t}function vt(){var t=mt(["\n  query {\n    getPosts {\n      _id\n      title\n      imageUrl\n      description\n    }\n  }\n"]);return vt=function(){return t},t}function mt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var pt=Object(Z["b"])(vt()),gt=Object(Z["b"])(ft()),ht=Object(Z["b"])(dt()),bt=Object(Z["b"])(ut()),yt=Object(Z["b"])(ct()),_t=Object(Z["b"])(lt()),jt=Object(Z["b"])(it()),xt=Object(Z["b"])(ot()),wt=Object(Z["b"])(nt()),Pt=Object(Z["b"])(at()),kt=Object(Z["b"])(st()),Vt=Object(Z["b"])(rt()),Ot=Object(Z["b"])(et()),Ut=Object(Z["b"])(tt()),St=r("c1df"),It=r.n(St);function Ct(t){return Ft(t)||Tt(t)||$t()}function $t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Tt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Ft(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var Dt=4,Et={name:"Posts",data:function(){return{pageNum:1,showMoreEnabled:!0,showPostCreator:!1}},apollo:{infiniteScrollPosts:{query:gt,variables:{pageNum:1,pageSize:Dt}}},methods:{showMorePosts:function(){var t=this;this.pageNum+=1,this.$apollo.queries.infiniteScrollPosts.fetchMore({variables:{pageNum:this.pageNum,pageSize:Dt},updateQuery:function(e,r){var s=r.fetchMoreResult,a=s.infiniteScrollPosts.posts,n=s.infiniteScrollPosts.hasMore;return t.showMoreEnabled=n,{infiniteScrollPosts:{__typename:e.infiniteScrollPosts.__typename,posts:[].concat(Ct(e.infiniteScrollPosts.posts),Ct(a)),hasMore:n}}}})},goToPost:function(t){this.$router.push("/posts/".concat(t))},formatDate:function(t){return It()(new Date(t)).format("ll")}}},qt=Et,Lt=r("99d9"),Rt=r("12b2"),At=r("adda"),zt=r("c954"),Bt=r("0789"),Mt=Object(v["a"])(qt,K,X,!1,null,null,null),Nt=Mt.exports;p()(Mt,{VBtn:b["a"],VCard:y["a"],VCardActions:Lt["a"],VCardText:Lt["b"],VCardTitle:Rt["a"],VContainer:_["a"],VFlex:G["a"],VIcon:x["a"],VImg:At["a"],VLayout:Y["a"],VListTile:P["a"],VListTileAction:k["a"],VListTileAvatar:zt["a"],VListTileContent:V["a"],VListTileSubTitle:V["b"],VListTileTitle:V["c"],VSlideYTransition:Bt["d"],VSpacer:S["a"]});var Qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.getPost?r("v-container",{staticClass:"mt-3",attrs:{flexbox:"",center:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{hover:""}},[r("v-card-title",[r("h1",[t._v(t._s(t.getPost.title))]),t.user?r("v-btn",{attrs:{large:"",icon:""},on:{click:t.handleLikeToggle}},[r("v-icon",{attrs:{large:"",color:t.checkIfPostLiked(t.getPost._id)?"red":"grey"}},[t._v("favorite")])],1):t._e(),r("h3",{staticClass:"ml-3 font-weight-thin"},[t._v(t._s(t.getPost.likes)+" LIKES")]),r("v-spacer"),r("v-icon",{attrs:{color:"info",large:""},on:{click:t.goToPreviousPage}},[t._v("arrow_back")])],1),r("v-tooltip",{attrs:{right:""}},[r("span",[t._v("Click to enlarge image")]),r("v-img",{attrs:{slot:"activator",src:t.getPost.imageUrl,id:"post__image"},on:{click:t.toggleImageDialog},slot:"activator"})],1),r("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-img",{attrs:{src:t.getPost.imageUrl,height:"80vh"}})],1)],1),r("v-card-text",[t._l(t.getPost.categories,function(e,s){return r("span",{key:s},[r("v-chip",{staticClass:"mb-3",attrs:{color:"accent","text-color":"white"}},[t._v(t._s(e))])],1)}),r("h3",[t._v(t._s(t.getPost.description))])],2)],1)],1)],1),r("div",{staticClass:"mt-3"},[t.user?r("v-layout",{staticClass:"mb-3"},[r("v-flex",{attrs:{xs12:""}},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleAddPostMessage(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.messageRules,clearable:"","append-outer-icon":t.messageBody&&"send",label:"Add Message",type:"text","prepend-icon":"email",required:""},on:{"click:append-outer":t.handleAddPostMessage},model:{value:t.messageBody,callback:function(e){t.messageBody=e},expression:"messageBody"}})],1)],1)],1)],1)],1):t._e(),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-list",{attrs:{subheader:"","two-line":""}},[r("v-subheader",[t._v("Messages ("+t._s(t.getPost.messages.length)+")")]),t._l(t.getPost.messages,function(e){return[r("v-divider",{key:e._id}),r("v-list-tile",{key:e.title,attrs:{avatar:"",inset:""}},[r("v-list-tile-avatar",[r("img",{attrs:{src:e.messageUser.avatar,alt:""}})]),r("v-list-tile-content",[r("v-list-tile-title",[t._v("\n                  "+t._s(e.messageBody)+"\n                ")]),r("v-list-tile-sub-title",[t._v("\n                  "+t._s(e.messageUser.username)+"\n                  "),r("span",{staticClass:"grey--text text--lighten-1 hidden-xs-only"},[t._v(t._s(t.formatDate(e.messageDate)))])])],1),r("v-list-tile-action",{staticClass:"hidden-xs-only"},[r("v-icon",{attrs:{color:t.checkIfOwnMessage(e)?"accent":"grey"}},[t._v("chat_bubble")])],1)],1)]})],2)],1)],1)],1)],1):t._e()},Gt=[];function Yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){Jt(t,e,r[e])})}return t}function Jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Wt={name:"Post",props:["postId"],data:function(){return{postLiked:!1,dialog:!1,messageBody:"",isFormValid:!0,messageRules:[function(t){return!!t||"Message is required"},function(t){return t&&t.length<75||"Message must be maximum 75 characters in length"}]}},apollo:{getPost:{query:ht,variables:function(){return{postId:this.postId}}}},computed:Yt({},Object(i["b"])(["user","userFavourites"])),methods:{checkIfPostLiked:function(t){return this.userFavourites&&this.userFavourites.some(function(e){return e._id===t})?(this.postLiked=!0,!0):(this.postLiked=!1,!1)},handleLikeToggle:function(){this.postLiked?this.handleUnlikePost():this.handleLikePost()},handleLikePost:function(){var t=this,e={postId:this.postId,username:this.user.username};this.$apollo.mutate({mutation:kt,variables:e,update:function(e,r){r.data.likePost;var s=e.readQuery({query:ht,variables:{postId:t.postId}});s.getPost.likes+=1,e.writeQuery({query:ht,variables:{postId:t.postId},data:s})}}).then(function(e){var r=e.data,s=Yt({},t.user,{favourites:r.likePost.favourites});t.$store.commit("setUser",s)}).catch(function(t){return console.error(t)})},handleUnlikePost:function(){var t=this,e={postId:this.postId,username:this.user.username};this.$apollo.mutate({mutation:Vt,variables:e,update:function(e,r){r.data.likePost;var s=e.readQuery({query:ht,variables:{postId:t.postId}});s.getPost.likes-=1,e.writeQuery({query:ht,variables:{postId:t.postId},data:s})}}).then(function(e){var r=e.data,s=Yt({},t.user,{favourites:r.unlikePost.favourites});t.$store.commit("setUser",s)}).catch(function(t){return console.error(t)})},handleAddPostMessage:function(){var t=this;if(this.$refs.form.validate()){var e={messageBody:this.messageBody,userId:this.user._id,postId:this.postId};this.$apollo.mutate({mutation:wt,variables:e,update:function(e,r){var s=r.data.addPostMessage,a=e.readQuery({query:ht,variables:{postId:t.postId}});a.getPost.messages.unshift(s),e.writeQuery({query:ht,variables:{postId:t.postId},data:a})}}).then(function(e){var r=e.data;t.$refs.form.reset(),console.log(r.addPostMessage)}).catch(function(t){return console.error(t)})}},goToPreviousPage:function(){this.$router.go(-1)},toggleImageDialog:function(){window.innerWidth>500&&(this.dialog=!this.dialog)},checkIfOwnMessage:function(t){return this.user&&this.user._id===t.messageUser._id},formatDate:function(t){return It()(new Date(t)).fromNow()}}},Ht=Wt,Kt=(r("b17c"),r("cc20")),Xt=r("4bd4"),Zt=r("e0c7"),te=r("3a2f"),ee=Object(v["a"])(Ht,Qt,Gt,!1,null,null,null),re=ee.exports;p()(ee,{VBtn:b["a"],VCard:y["a"],VCardText:Lt["b"],VCardTitle:Rt["a"],VChip:Kt["a"],VContainer:_["a"],VDialog:Q["a"],VDivider:j["a"],VFlex:G["a"],VForm:Xt["a"],VIcon:x["a"],VImg:At["a"],VLayout:Y["a"],VList:w["a"],VListTile:P["a"],VListTileAction:k["a"],VListTileAvatar:zt["a"],VListTileContent:V["a"],VListTileSubTitle:V["b"],VListTileTitle:V["c"],VSpacer:S["a"],VSubheader:Zt["a"],VTextField:I["a"],VTooltip:te["a"]});var se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"text-xs-center":"","mt-5":"","pt-5":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"xs-12":"",sm6:"","offset-sm3":""}},[r("v-card",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":"","mt-3":""}},[r("h1",[t._v("Create a post")])])],1),r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.addPost(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.titleRules,label:"Post Title",type:"text",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.imageRules,label:"Image Url",type:"text",required:""},model:{value:t.imageUrl,callback:function(e){t.imageUrl=e},expression:"imageUrl"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("img",{attrs:{src:t.imagePreviewUrl,height:"300px"}})])],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-select",{attrs:{rules:t.categoriesRules,items:["Art","Education","Travel","Photography","Technology","Food","Furniture"],multiple:"",label:"Categories"},model:{value:t.categories,callback:function(e){t.categories=e},expression:"categories"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-textarea",{attrs:{rules:t.descriptionRules,label:"Description",type:"text",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{loading:t.loading,color:"accent",type:"submit",disabled:!t.isFormValid||t.loading}},[t._v("Create\n                  "),r("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[r("v-icon",{attrs:{light:""}},[t._v("cached")])],1)])],1)],1)],1)],1)],1)],1)],1)],1)},ae=[];function ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){oe(t,e,r[e])})}return t}function oe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ie={name:"AddPost",data:function(){return{isFormValid:!0,title:"",imageUrl:"",imagePreviewUrl:"",categories:[],description:"",titleRules:[function(t){return!!t||"Title is required"},function(t){return t.length<20||"Title must have less than 20 characters in length"}],imageRules:[function(t){return!!t||"Image url is required"}],categoriesRules:[function(t){return t.length>=1||"At least one category is  required"}],descriptionRules:[function(t){return!!t||"Description is required"},function(t){return t.length<200||"Description must have less than 200 characters in length"}]}},computed:ne({},Object(i["b"])(["loading","user"])),watch:{imageUrl:function(t){var e=this;Object(l["setTimeout"])(function(){return e.imagePreviewUrl=e.imageUrl},1e3)}},methods:{addPost:function(){this.$refs.form.validate&&(this.$store.dispatch("addPost",{title:this.title,imageUrl:this.imageUrl,categories:this.categories,description:this.description,creatorId:this.user._id}),this.$router.push("/"))}}},le=ie,ce=r("b56d"),ue=r("a844"),de=Object(v["a"])(le,se,ae,!1,null,null,null),fe=de.exports;p()(de,{VBtn:b["a"],VCard:y["a"],VContainer:_["a"],VFlex:G["a"],VForm:Xt["a"],VIcon:x["a"],VLayout:Y["a"],VSelect:ce["a"],VTextField:I["a"],VTextarea:ue["a"]});var ve=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"text-xs-center":"","mt-5":"","pt-5":""}},[t.error?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("form-alert",{attrs:{message:t.error.message}})],1)],1):t._e(),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"xs-12":"",sm6:"","offset-sm3":""}},[r("v-card",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":"","mt-3":""}},[r("h1",[t._v("Welcome Back!")])])],1),r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.signinUser(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.usernameRules,"prepend-icon":"face",label:"Username",type:"text",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.passwordRules,"prepend-icon":"extension",label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{loading:t.loading,color:"accent",type:"submit",disabled:!t.isFormValid}},[t._v("Log In\n                                    "),r("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[r("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]),r("p",[t._v("Don't have an account yet?\n                                    "),r("router-link",{attrs:{to:"/signup"}},[t._v("Register ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},me=[];function pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){ge(t,e,r[e])})}return t}function ge(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var he={name:"Signin",data:function(){return{isFormValid:!0,username:"",password:"",usernameRules:[function(t){return!!t||"Username is required"},function(t){return t.length<10||"Username should be less than 10 characters in length"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t.length>=7||"Password must be at least 7 characters"}]}},computed:pe({},Object(i["b"])(["user","error","loading"])),watch:{user:function(t){t&&this.$router.push("/")}},methods:{signinUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signinUser",{username:this.username,password:this.password})}}},be=he,ye=(r("56e8"),Object(v["a"])(be,ve,me,!1,null,null,null)),_e=ye.exports;p()(ye,{VBtn:b["a"],VCard:y["a"],VContainer:_["a"],VFlex:G["a"],VForm:Xt["a"],VIcon:x["a"],VLayout:Y["a"],VTextField:I["a"]});var je=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"text-xs-center":"","mt-5":"","pt-5":""}},[t.error?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("form-alert",{attrs:{message:t.error.message}})],1)],1):t._e(),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"xs-12":"",sm6:"","offset-sm3":""}},[r("v-card",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":"","mt-3":""}},[r("h1",[t._v("Get Started Here")])])],1),r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.signupUser(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.usernameRules,"prepend-icon":"face",label:"Username",type:"text",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.emailRules,"prepend-icon":"email",label:"Email",type:"email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.passwordRules,"prepend-icon":"extension",label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.passwordRules,"prepend-icon":"gavel",label:"Confirm Password",type:"password",required:""},model:{value:t.passwordConfirmation,callback:function(e){t.passwordConfirmation=e},expression:"passwordConfirmation"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{loading:t.loading,color:"accent",type:"submit",disabled:!t.isFormValid||t.loading}},[t._v("Sign Up\n                  "),r("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[r("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]),r("p",[t._v("Already have an account?\n                  "),r("router-link",{attrs:{to:"/signin"}},[t._v("Sign In ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},xe=[];function we(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){Pe(t,e,r[e])})}return t}function Pe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ke={name:"Signup",data:function(){var t=this;return{isFormValid:!0,username:"",email:"",password:"",passwordConfirmation:"",usernameRules:[function(t){return!!t||"Username is required"},function(t){return t.length<10||"Username should be less than 10 characters in length"}],emailRules:[function(t){return!!t||"Email is required"},function(t){return/.@+./.test(t)||"Email must be valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t.length>=7||"Password must be at least 7 characters"},function(e){return e===t.password||"Passwords must match"}]}},computed:we({},Object(i["b"])(["error","loading","user"])),watch:{user:function(t){t&&this.$router.push("/")}},methods:{signupUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signupUser",{username:this.username,email:this.email,password:this.password})}}},Ve=ke,Oe=Object(v["a"])(Ve,je,xe,!1,null,null,null),Ue=Oe.exports;p()(Oe,{VBtn:b["a"],VCard:y["a"],VContainer:_["a"],VFlex:G["a"],VForm:Xt["a"],VIcon:x["a"],VLayout:Y["a"],VTextField:I["a"]});var Se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"text-xs-center"},[r("v-flex",{attrs:{sm6:"","offset-sm3":""}},[r("v-card",[r("v-layout",[r("v-flex",{attrs:{xs5:""}},[r("v-img",{attrs:{height:"125px",contain:"",src:t.user.avatar}})],1),r("v-flex",{attrs:{xs7:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("div",{staticClass:"headline"},[t._v(t._s(t.user.username))]),r("div",[t._v("Joined "+t._s(t.formatDate(t.user.joinDate)))]),r("div",{staticClass:"hidden-xs-only font-weight-thin"},[t._v(t._s(t.user.favourites.length)+" Favourites")]),r("div",{staticClass:"hidden-xs-only font-weight-thin"},[t._v(t._s(t.userPosts.length)+" Post Added")])])])],1)],1)],1)],1),t.userFavourites.length?r("v-container",{staticClass:"mt-3"},[r("v-flex",{attrs:{xs12:""}},[r("h2",{staticClass:"font-weight-light"},[t._v("Favourited\n        "),r("span",{staticClass:"font-weight-regular"},[t._v(t._s(t.userFavourites.length))])])]),r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.userFavourites,function(e){return r("v-flex",{key:e._id,attrs:{xs12:"",sm6:""}},[r("v-card",{staticClass:"mt-3 ml-1 mr-2",attrs:{hover:""}},[r("v-img",{attrs:{height:"30vh",src:e.imageUrl},on:{click:function(r){return t.goToPost(e._id)}}}),r("v-card-text",[t._v(t._s(e.title))])],1)],1)}),1)],1):r("v-container",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("h2",[t._v("You currently don't have any favourited posts.")])])],1)],1),t.userPosts.length?t._e():r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("h2",[t._v("You currently don't have any posts.")])])],1)],1),r("v-container",{staticClass:"mt-3"},[r("v-flex",{attrs:{"xs-12":""}},[r("h2",{staticClass:"font-weight-light"},[t._v("\n        Your Posts\n        "),r("span",[t._v(t._s(t.userPosts.length))])])]),r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.userPosts,function(e){return r("v-flex",{key:e._id,attrs:{xs12:"",sm6:""}},[r("v-card",{staticClass:"mt-3 ml-1 mr-2",attrs:{hover:""}},[r("v-btn",{attrs:{color:"info",floating:"",fab:"",small:"",dark:""},on:{click:function(r){return t.loadPost(e)}}},[r("v-icon",[t._v("edit")])],1),r("v-btn",{attrs:{color:"error",floating:"",fab:"",small:"",dark:""},on:{click:function(r){return t.handleDeleteUserPost(e)}}},[r("v-icon",[t._v("delete")])],1),r("v-img",{attrs:{height:"30vh",src:e.imageUrl},on:{click:function(r){return t.goToPost(e._id)}}}),r("v-card-text",[t._v(t._s(e.title))])],1)],1)}),1)],1),r("v-dialog",{attrs:{xs12:"",sm6:"","offset-sm3":"",persistent:""},model:{value:t.editPostDialog,callback:function(e){t.editPostDialog=e},expression:"editPostDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("Update Post")]),r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleUpdateUserPost(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.titleRules,label:"Post Title",type:"text",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.imageRules,label:"Image Url",type:"text",required:""},model:{value:t.imageUrl,callback:function(e){t.imageUrl=e},expression:"imageUrl"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("img",{attrs:{src:t.imagePreviewUrl,height:"300px"}})])],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-select",{attrs:{rules:t.categoriesRules,items:["Art","Education","Travel","Photography","Technology","Food","Furniture"],multiple:"",label:"Categories"},model:{value:t.categories,callback:function(e){t.categories=e},expression:"categories"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-textarea",{attrs:{rules:t.descriptionRules,label:"Description",type:"text",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),r("v-divider"),r("v-card-actions"),r("v-spacer"),r("v-btn",{staticClass:"success--text",attrs:{type:"submit",flat:"",disabled:!t.isFormValid}},[t._v("Save")]),r("v-btn",{staticClass:"error--text",attrs:{flat:""},on:{click:function(e){t.editPostDialog=!1}}},[t._v("Cancel")])],1)],1)],1)],1)],1)},Ie=[];function Ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){$e(t,e,r[e])})}return t}function $e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Te={name:"Profile",data:function(){return{editPostDialog:!1,isFormValid:!0,title:"",imageUrl:"",imagePreviewUrl:"",categories:[],description:"",titleRules:[function(t){return!!t||"Title is required"},function(t){return t.length<20||"Title must have less than 20 characters in length"}],imageRules:[function(t){return!!t||"Image url is required"}],categoriesRules:[function(t){return t.length>=1||"At least one category is  required"}],descriptionRules:[function(t){return!!t||"Description is required"},function(t){return t.length<200||"Description must have less than 200 characters in length"}]}},computed:Ce({},Object(i["b"])(["user","userFavourites","userPosts"])),watch:{imageUrl:function(t){var e=this;setTimeout(function(){return e.imagePreviewUrl=e.imageUrl},1e3)}},created:function(){this.handleGetUserPosts()},methods:{goToPost:function(t){this.$router.push("/posts/".concat(t))},handleGetUserPosts:function(){this.$store.dispatch("getUserPosts",{userId:this.user._id})},handleUpdateUserPost:function(){this.$refs.form.validate()&&(this.$store.dispatch("updateUserPost",{postId:this.postId,userId:this.user._id,title:this.title,imageUrl:this.imageUrl,categories:this.categories,description:this.description}),this.editPostDialog=!1)},loadPost:function(t){var e=t._id,r=t.title,s=t.imageUrl,a=t.categories,n=t.description,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.editPostDialog=o,this.postId=e,this.title=r,this.imageUrl=s,this.categories=a,this.description=n},handleDeleteUserPost:function(t){this.loadPost(t,!1);var e=window.confirm("Are you sure you want to delete this post?");e&&this.$store.dispatch("deleteUserPost",{postId:this.postId})},formatDate:function(t){return It()(new Date(t)).format("ll")}}},Fe=Te,De=Object(v["a"])(Fe,Se,Ie,!1,null,null,null),Ee=De.exports;p()(De,{VBtn:b["a"],VCard:y["a"],VCardActions:Lt["a"],VCardText:Lt["b"],VCardTitle:Rt["a"],VContainer:_["a"],VDialog:Q["a"],VDivider:j["a"],VFlex:G["a"],VForm:Xt["a"],VIcon:x["a"],VImg:At["a"],VLayout:Y["a"],VSelect:ce["a"],VSpacer:S["a"],VTextField:I["a"],VTextarea:ue["a"]});var qe=r("a34a"),Le=r.n(qe);function Re(t){return Be(t)||ze(t)||Ae()}function Ae(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ze(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Be(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function Me(t,e,r,s,a,n,o){try{var i=t[n](o),l=i.value}catch(c){return void r(c)}i.done?e(l):Promise.resolve(l).then(s,a)}function Ne(t){return function(){var e=this,r=arguments;return new Promise(function(s,a){var n=t.apply(e,r);function o(t){Me(n,s,a,o,i,"next",t)}function i(t){Me(n,s,a,o,i,"throw",t)}o(void 0)})}}function Qe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},s=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),s.forEach(function(e){Ge(t,e,r[e])})}return t}function Ge(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}s["a"].use(i["a"]);var Ye=new i["a"].Store({state:{posts:[],searchResults:[],userPosts:[],user:null,loading:!1,error:null,authError:null},mutations:{setPosts:function(t,e){t.posts=e},setUserPosts:function(t,e){t.userPosts=e},setLoading:function(t,e){t.loading=e},setUser:function(t,e){t.user=e},setAuthError:function(t,e){t.authError=e},setSearchResults:function(t,e){t.searchResults=null!==e?e:[]},clearUser:function(t){return t.user=null},setError:function(t,e){return t.error=e},clearError:function(t){return t.error=null},clearSearchResults:function(t){return t.searchResults=[]}},getters:{posts:function(t){return t.posts},userPosts:function(t){return t.userPosts},searchResults:function(t){return t.searchResults},loading:function(t){return t.loading},user:function(t){return t.user},userFavourites:function(t){return t.user&&t.user.favourites},error:function(t){return t.error},authError:function(t){return t.authError}},actions:{getCurrentUser:function(t){var e=t.commit;e("setLoading",!0),ar.query({query:yt}).then(function(t){var r=t.data;e("setLoading",!1),e("setUser",r.getCurrentUser)}).catch(function(t){e("setLoading",!1),console.error(t)})},searchPosts:function(t,e){var r=t.commit;ar.query({query:bt,variables:e}).then(function(t){var e=t.data;console.log(e.searchPosts),r("setSearchResults",e.searchPosts)}).catch(function(t){return console.error(t)})},getPosts:function(t){var e=t.commit;e("setLoading",!0),ar.query({query:pt}).then(function(t){var r=t.data;e("setPosts",r.getPosts),e("setLoading",!1)}).catch(function(t){console.error(t),e("setLoading",!1)})},addPost:function(t,e){t.commit;ar.mutate({mutation:Pt,variables:e,update:function(t,e){var r=e.data.addPost,s=t.readQuery({query:pt});s.getPosts.unshift(r),t.writeQuery({query:pt,data:s})},optimisticResponse:{__typename:"Mutation",addPost:Qe({__typename:"Post",_id:-1},e)},refetchQueries:[{query:gt,variables:{pageNum:1,pageSize:4}}]}).then(function(t){var e=t.data;console.log(e)}).catch(function(t){return console.log(t)})},getUserPosts:function(t,e){var r=t.commit;ar.query({query:_t,variables:e}).then(function(t){var e=t.data;r("setUserPosts",e.getUserPosts)}).catch(function(t){return console.error(t)})},signinUser:function(t,e){var r=t.commit;r("clearError"),r("setLoading",!0),ar.mutate({mutation:jt,variables:e}).then(function(t){var e=t.data;r("setLoading",!1),localStorage.setItem("token",e.signinUser.token),We.go()}).catch(function(t){r("setLoading",!1),r("setError",t),console.error(t)})},signupUser:function(t,e){var r=t.commit;r("clearError"),r("setLoading",!0),ar.mutate({mutation:xt,variables:e}).then(function(t){var e=t.data;r("setLoading",!1),localStorage.setItem("token",e.signupUser.token),We.go()}).catch(function(t){r("setLoading",!1),r("setError",t),console.error(t)})},signoutUser:function(){var t=Ne(Le.a.mark(function t(e){var r;return Le.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearUser"),localStorage.setItem("token",""),t.next=5,ar.resetStore();case 5:We.push("/");case 6:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),updateUserPost:function(t,e){var r=t.state,s=t.commit;ar.mutate({mutation:Ot,variables:e}).then(function(t){var e=t.data,a=r.userPosts.findIndex(function(t){return t._id===e.updateUserPost._id}),n=[].concat(Re(r.userPosts.slice(0,a)),[e.updateUserPost],Re(r.userPosts.slice(a+1)));s("setUserPosts",n)}).catch(function(t){return console.error(t)})},deleteUserPost:function(t,e){var r=t.state,s=t.commit;ar.mutate({mutation:Ut,variables:e}).then(function(t){var e=t.data,a=r.userPosts.findIndex(function(t){return t._id===e.deleteUserPost._id}),n=[].concat(Re(r.userPosts.slice(0,a)),Re(r.userPosts.slice(a+1)));s("setUserPosts",n)}).catch(function(t){return console.error(t)})}}}),Je=function(t,e,r){Ye.getters.user?r():r({path:"/signin"})};s["a"].use(E["a"]);var We=new E["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:H},{path:"/posts",name:"posts",component:Nt},{path:"/posts/:postId",name:"post",component:re,props:!0},{path:"/post/add",name:"addpost",component:fe,beforeEnter:Je},{path:"/profile",name:"profile",component:Ee,beforeEnter:Je},{path:"/signin",name:"signin",component:_e},{path:"/signup",name:"signup",component:Ue}]}),He=r("522d"),Ke=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-alert",{attrs:{type:"error",value:!0,dismissible:"",transition:"scale-transition"}},[r("h3",[t._v(t._s(t.message))])])},Xe=[],Ze={props:["message"]},tr=Ze,er=r("0798"),rr=Object(v["a"])(tr,Ke,Xe,!1,null,null,null),sr=rr.exports;p()(rr,{VAlert:er["a"]}),r.d(e,"defaultClient",function(){return ar}),s["a"].component("form-alert",sr),s["a"].use(He["a"]);var ar=new Z["a"]({uri:"/graphql",fetchOptions:{credentials:"include"},request:function(t){localStorage.token||localStorage.setItem("token",""),t.setContext({headers:{authorization:localStorage.getItem("token")}})},onError:function(t){var e=t.graphQLErrors,r=t.networkError;if(r&&console.log("[NetworkError]",r),e){var s=!0,a=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;console.dir(l),"AuthenticationError"===l.name&&(Ye.commit("setAuthError",l),Ye.dispatch("signoutUser"))}}catch(l){a=!0,n=l}finally{try{s||null==i.return||i.return()}finally{if(a)throw n}}}}}),nr=new He["a"]({defaultClient:ar});s["a"].config.productionTip=!1,new s["a"]({apolloProvider:nr,router:We,store:Ye,render:function(t){return t(D)},created:function(){this.$store.dispatch("getCurrentUser")}}).$mount("#app")},"56e8":function(t,e,r){"use strict";var s=r("f81e"),a=r.n(s);a.a},"8b71":function(t,e,r){"use strict";var s=r("d944"),a=r.n(s);a.a},b17c:function(t,e,r){"use strict";var s=r("2d2f"),a=r.n(s);a.a},d944:function(t,e,r){},f81e:function(t,e,r){}});
//# sourceMappingURL=app.ead69ceb.js.map